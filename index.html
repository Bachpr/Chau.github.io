<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Thiệp Chúc Mừng 20/10 - Uyên Châu Cute</title>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;800&family=Quicksand:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg1: #fff0f5;
      --bg2: #ffdbe6;
      --bg3: #fff0f5;
      --text: #57104f;
      --panel: rgba(255,255,255,0.85);
      --panel-border: #fbcfe8;
      --accent: #ec4899;
      --accent-strong: #db2777;
      --body-glow: 0 0 8px rgba(236,72,153,0.35);
      --title-grad: linear-gradient(90deg,#9d174d,#ec4899,#7c3aed,#9d174d);
      --title-shadow: 0 0 8px rgba(236,72,153,.25);
    }
    [data-theme="dark"]{
      --bg1: #1a161c;
      --bg2: #251b27;
      --bg3: #1a161c;
      --text: #fde2e2;
      --panel: rgba(60,40,60,0.72);
      --panel-border: #f5a8c8;
      --accent: #f472b6;
      --accent-strong: #be185d;
      --body-glow: 0 0 10px rgba(255,192,203,.55);
      --title-grad: linear-gradient(90deg,#fecdd3,#f472b6,#a78bfa,#fecdd3);
      --title-shadow: 0 0 10px rgba(255,192,203,.30);
    }
    html,body{height:100%}
    body{
      margin:0; font-family: Quicksand, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      color:var(--text);
      background: linear-gradient(180deg, var(--bg1) 0%, var(--bg2) 50%, var(--bg3) 100%);
      background-attachment: fixed;
    }
    .wrap{min-height:100vh; display:grid; place-items:center; padding:24px}
    .card{
      max-width: 760px; width: min(92vw, 760px);
      background: var(--panel);
      border: 1px solid var(--panel-border);
      border-radius: 24px; padding: 36px; backdrop-filter: blur(10px);
      box-shadow: 0 14px 40px rgba(0,0,0,.10);
      text-align:center;
    }
    .title{ 
      font-family: 'Playfair Display', ui-serif, Georgia, serif;
      font-size: clamp(32px, 6vw, 52px);
      font-weight: 800; margin: 0 0 10px;
      background-image: var(--title-grad);
      background-size: 200% 200%;
      -webkit-background-clip: text; background-clip: text; color: transparent;
      filter: drop-shadow(var(--title-shadow));
      animation: hueSlide 6s linear infinite;
    }
    @keyframes hueSlide{ 0%{background-position-x:0%} 50%{background-position-x:100%} 100%{background-position-x:0%} }
    .lead{ font-size:18px; line-height:1.75; text-shadow: var(--body-glow); margin: 14px auto 0; max-width: 52ch }
    .row{ display:flex; gap:12px; justify-content:center; flex-wrap:wrap; margin-top: 22px }
    .btn{ appearance:none; border:1px solid color-mix(in oklab, var(--accent) 50%, transparent); background: var(--accent); color:#fff; padding:12px 18px; border-radius: 12px; cursor:pointer; font-weight: 700; box-shadow: 0 6px 18px rgba(236,72,153,.30); transition: transform .15s ease, filter .15s ease, background .2s ease }
    .btn:hover{ transform: translateY(-1px) scale(1.03); filter: brightness(1.05) }
    .btn-outline{ background: transparent; color: var(--text); border-color: color-mix(in oklab, var(--accent) 45%, transparent); box-shadow: 0 4px 14px rgba(0,0,0,.06) }
    .btn-outline:hover{ background: color-mix(in oklab, var(--accent) 18%, transparent) }
    .btn-ghost{ background: transparent; color: var(--accent-strong); border: 1px dashed color-mix(in oklab, var(--accent) 50%, transparent) }
    .btn-ghost:hover{ background: color-mix(in oklab, var(--accent) 15%, transparent) }

    .confetti{ position: fixed; inset: 0; pointer-events:none; overflow:hidden; }
    .piece{ position:absolute; top:-40px; will-change: transform, opacity; animation: fall 2.2s ease-out forwards }
    @keyframes fall{
      0%{ transform: translateY(-40px) rotate(0deg); opacity:0 }
      10%{ opacity:1 }
      100%{ transform: translateY(100vh) rotate(360deg); opacity:0 }
    }
    .audio-hint{ font-size:12px; opacity:.8; margin-top:6px }
  </style>
</head>
<body>
  <div class="wrap" id="app" data-theme="light">
    <div class="card">
      <div style="font-size:28px; margin-bottom:8px">💗</div>
      <h1 class="title">Thiệp Chúc Mừng 20/10</h1>
      <p class="lead">
        Gửi đến <strong>Uyên Châu Cute</strong> những lời chúc tốt đẹp nhất nhân ngày Phụ Nữ Việt Nam 20/10.
        Chúc bạn luôn xinh đẹp, mạnh mẽ, thành công và hạnh phúc. Mong mỗi ngày đều rực rỡ như hoa hồng hồng.
      </p>
      <p style="margin-top:24px; font-size:18px; color:var(--accent); font-weight:600; animation: pulseHeart 2.5s ease-in-out infinite;">— Tặng riêng cho <strong>Uyên Châu Cute 💞</strong></p>
      <style>@keyframes pulseHeart{0%,100%{opacity:.9;transform:scale(1);}50%{opacity:1;transform:scale(1.07);}}</style>
      <div class="row">
        <button class="btn" id="btn-confetti">🎉 Bắn Hoa Giấy</button>
        <button class="btn btn-outline" id="btn-toggle">🌙 Chế Độ Tối</button>
        <button class="btn btn-ghost" id="btn-music">🔊 Bật Nhạc</button>
      </div>
      <div class="row" style="margin-top:10px; align-items:center;">
        <input type="range" id="volume-slider" min="0" max="1" step="0.01" value="0.6" style="width:160px; accent-color:var(--accent);"/>
        <button class="btn btn-outline" id="btn-pause">⏸ Tạm Dừng</button>
      </div>
      <div class="audio-hint" id="audio-hint">Chọn “Bật Nhạc” để phát lo-fi dịu nhẹ ♪</div>
    </div>
    <div class="confetti" id="confetti-root"></div>

    <!-- Hidden YouTube player (audio only) -->
    <div id="yt-holder" style="width:0;height:0;overflow:hidden;position:absolute;left:-9999px;top:-9999px;">
      <div id="yt-player"></div>
    </div>
  </div>

  <script>
    (function(){
      const app = document.getElementById('app');
      const confettiRoot = document.getElementById('confetti-root');
      const btnConfetti = document.getElementById('btn-confetti');
      const btnToggle = document.getElementById('btn-toggle');
      const btnMusic = document.getElementById('btn-music');
      const hint = document.getElementById('audio-hint');
      const vol = document.getElementById('volume-slider');
      const btnPause = document.getElementById('btn-pause');

      function isDark(){ return app.getAttribute('data-theme') === 'dark'; }
      function setDark(val){ app.setAttribute('data-theme', val ? 'dark' : 'light'); btnToggle.textContent = val ? '☀️ Chế Độ Sáng' : '🌙 Chế Độ Tối'; }

      setDark(false);
      btnToggle.addEventListener('click',()=> setDark(!isDark()));

      let ytPlayer = null; let playing = false; let ytApiLoaded = false;
      const tag = document.createElement('script');
      tag.src = 'https://www.youtube.com/iframe_api';
      document.head.appendChild(tag);

      window.onYouTubeIframeAPIReady = function(){
        ytApiLoaded = true;
        ytPlayer = new YT.Player('yt-player', {
          videoId: 'IpFX2vq8HKw',
          playerVars: { autoplay: 0, controls: 0, rel: 0, modestbranding: 1, playsinline: 1 },
          events: {
            onReady: function(){ try{ ytPlayer.setVolume(parseFloat(vol.value||'0.6')*100); }catch(_){} },
            onStateChange: function(e){
              if(e.data === YT.PlayerState.PLAYING){ playing = true; btnMusic.textContent='🔇 Tắt Nhạc'; btnPause.textContent='⏸ Tạm Dừng'; hint.style.display='none'; }
              if(e.data === YT.PlayerState.PAUSED || e.data === YT.PlayerState.ENDED){ playing = false; btnMusic.textContent='🔊 Bật Nhạc'; btnPause.textContent='▶ Phát Lại'; }
            }
          }
        });
      };

      function toggleMusic(){ if(!ytPlayer) return; const st = ytPlayer.getPlayerState(); if(st !== 1){ ytPlayer.playVideo(); } else { ytPlayer.pauseVideo(); } }
      btnMusic.addEventListener('click', toggleMusic);

      function togglePause(){ if(!ytPlayer) return; const st = ytPlayer.getPlayerState(); if(st !== 1){ ytPlayer.playVideo(); } else { ytPlayer.pauseVideo(); } }
      btnPause.addEventListener('click', togglePause);

      vol.addEventListener('input', function(){ if(ytPlayer) ytPlayer.setVolume(parseFloat(this.value||'0.6')*100); });
      btnPause.textContent = '▶ Phát Lại';

      function spawnConfetti(){
        const emojis = ['💖','🌸','🎀','✨','💐','🌷','🌹'];
        for(let i=0;i<22;i++){
          const el = document.createElement('span');
          el.className='piece';
          el.textContent = emojis[i % emojis.length];
          el.style.left = Math.random()*100 + 'vw';
          el.style.fontSize = (12 + Math.random()*18) + 'px';
          el.style.animationDelay = (Math.random()*0.4) + 's';
          confettiRoot.appendChild(el);
          setTimeout(()=> el.remove(), 2400);
        }
      }
      btnConfetti.addEventListener('click', spawnConfetti);

      try{
        console.assert(typeof spawnConfetti === 'function', 'spawnConfetti missing');
        const wasDark = isDark(); setDark(!wasDark); console.assert(isDark() !== wasDark, 'toggle failed'); setDark(wasDark);
        console.assert(typeof window.onYouTubeIframeAPIReady === 'function', 'YouTube API not wired');
        console.assert(!!vol && !!btnPause, 'controls missing');
      }catch(e){ console.warn('Runtime tests failed', e); }
    })();
  </script>
</body>
</html>
